<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cone Multimodal - Encontre a plataforma</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/x-icon" href="assets/cone-logo.ico">

    <meta name="robots" content="noindex, noimageindex">
</head>

<body>
    <header class="head">
        <nav class="nav">
            <img class="logo-cone" src="assets/logo-intro-cone.png" alt="Cone Suape">
            <!-- <input class="search" type="text" id="txtBusca" placeholder="DIGITE O NOME DA PLATAFORMA" /> -->
        </nav>
    </header>

    <main>
        <div class="container">
            <div class="tab-empresas">
                <ul>
                    <li class="empresas-index">
                        <a href="plt1.html" class="content"><span class="fallback-span ini-span">MM1 e MM2</span></a>
                        <button class="qr-index qr-index-1" onclick="toggleQR(1)"></button>
                    </li>
                    <li class="empresas-index">
                        <a href="plt2.html" class="content"><span class="fallback-span ini-span">PP2</span></a>
                        <button href="" class="qr-index qr-index-2" onclick="toggleQR(2)"></button>
                    </li>
                </ul>
            </div>
            <div class="overlay-qr overlay-qr-1">
                <img src="assets/closeqr.svg" alt="close button" class="close-qr-index">
                <span>Plataformas MM1 e MM2</span>
                <img src="assets/QRCodes/QR-PLT1.svg" alt="QR Code plataformas MM1 e MM2">
                <span>Baixar Arquivos</span>
                <div class="containter-buttons-download">
                    <a class="btn-back btn-download" href="assets/QRCodes/QR-PLT1.svg" download>SVG</a>
                    <a class="btn-back btn-download" href="assets/QRCodes/QR-PLT1.png" download>PNG</a>
                </div>
            </div>
            <div class="overlay-qr overlay-qr-2">
                <img src="assets/closeqr.svg" alt="close button" class="close-qr-index">
                <span>Plataformas PP2</span>
                <img src="assets/QRCodes/QR-PLT2.svg" alt="QR Code Plataformas PP2">
                <span>Baixar Arquivos</span>
                <div class="containter-buttons-download">
                    <a class="btn-back btn-download" href="assets/QRCodes/QR-PLT2.svg" download>SVG</a>
                    <a class="btn-back btn-download" href="assets/QRCodes/QR-PLT2.png" download>PNG</a>
                </div>
            </div>
        </div>
    </main>

    <script>
        function toggleQR(index) {
            let overlays = document.querySelectorAll(".overlay-qr");

            // Fecha todas as outras overlays antes de abrir a nova
            overlays.forEach(overlay => overlay.style.display = "none");

            // Seleciona a overlay específica
            let overlay = document.querySelector(`.overlay-qr-${index}`);

            // Se já está aberta, fecha. Se não, abre.
            if (overlay.style.display === "flex") {
                overlay.style.display = "none";
            } else {
                overlay.style.display = "flex";

                // Adiciona um event listener para fechar ao clicar fora
                setTimeout(() => {
                    document.addEventListener("click", closeOverlayOutside);
                }, 0);
            }
        }

        function closeOverlayOutside(event) {
            let overlays = document.querySelectorAll(".overlay-qr");
            let buttons = document.querySelectorAll(".qr-index");
            let images = document.querySelectorAll(".overlay-qr img"); // Seleciona todas as imagens dentro da overlay

            let clickedInsideOverlay = [...overlays].some(overlay => overlay.contains(event.target));
            let clickedOnButton = [...buttons].some(button => button.contains(event.target));
            let clickedOnImage = [...images].some(img => img.contains(event.target)); // Verifica se clicou na imagem

            if (!clickedInsideOverlay || clickedOnImage) {
                overlays.forEach(overlay => overlay.style.display = "none");

                // Remove o event listener para evitar múltiplas chamadas desnecessárias
                document.removeEventListener("click", closeOverlayOutside);
            }
        }
    </script>

</body> 
</html>